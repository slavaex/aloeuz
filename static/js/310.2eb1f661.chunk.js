"use strict";(self.webpackChunkaloe_uz=self.webpackChunkaloe_uz||[]).push([[310],{2310:function(e,t,n){n.r(t);var r=n(4165),s=n(5861),a=n(9439),c=n(6251),i=n(7313),u=n(8467),o=n(2135),d=n(7255),l=n(9897),p=n(7109),x=n(97),h=n(581),m=n(423),f=n(6367),v=n(6417);t.default=function(){var e=(0,i.useState)(!1),t=(0,a.Z)(e,2),n=t[0],j=(t[1],(0,i.useState)(!1)),g=(0,a.Z)(j,2),k=g[0],w=g[1],Z=(0,u.UO)().id,y=(0,i.useState)(null),b=(0,a.Z)(y,2),N=(b[0],b[1]),S=(0,u.TH)(),F=(0,i.useState)(!0),P=(0,a.Z)(F,2),q=P[0],L=P[1],z=(0,p.NL)(),K=(0,x.a)({queryFn:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.wv)(Z));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),queryKey:["editProduct",{id:Z}],staleTime:0,cacheTime:0}),T=K.data,U=K.isLoading,_=(K.isSuccess,K.isFetched,(0,h.D)({mutationFn:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.O8)(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onSuccess:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.invalidateQueries({queryKey:["product",{id:t.sku.toString()}]});case 2:return e.next=4,z.invalidateQueries({queryKey:["editProduct",{id:t.sku.toString()}]});case 4:w((0,v.jsxs)("div",{className:"response-message flex content-center",children:[(0,v.jsxs)("div",{className:"content-center",children:["\u041f\u0440\u043e\u0434\u0443\u043a\u0442"," ",(0,v.jsxs)(o.rU,{className:"text-green-900 hover:drop-shadow hover:cursor-pointer underline font-oswald",to:"/product/".concat(t.sku),children:[t.title," - ",t.sku]})," ","\u0443\u0441\u043f\u0456\u0448\u043d\u043e \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e. \u2705"]}),(0,v.jsx)("img",{className:"max-w-xs max-h-20",src:t.image_path,alt:t.title})]})),L((function(e){return!e}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),C=_.mutateAsync,E=_.isPending;return(0,i.useEffect)((function(){return function(){}}),[S,Z]),(0,i.useEffect)((function(){N(T)}),[T]),U||E||n?(v.Fragment,null===T||void 0===T||T.description,(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.Z,{breadcrumbs:[{name:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u0438",link:"/products"},{name:"Loading... Please wait"}]}),(0,v.jsxs)("div",{className:"flex justify-center",children:[(0,v.jsx)("span",{className:"loader"}),(0,v.jsx)("h1",{children:"Loading... Please wait"})]})]})):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(f.Z,{title:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0443 '".concat(null===T||void 0===T?void 0:T.title,"'-\u2116").concat(null===T||void 0===T?void 0:T.sku)}),T?(0,v.jsx)(c.Z,{breadcrumbs:[{name:"".concat(T.title," (\u2116 ").concat(T.sku,")"),link:"/product/".concat(T.sku)},{name:"\u041e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0443"}]}):(0,v.jsx)(c.Z,{breadcrumbs:[{name:"Products",link:"/products?category=all"},{name:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0443"}]}),(0,v.jsxs)("div",{className:"page-content px-32 py-5 max-sm:px-5 text-justify",children:[k&&(0,v.jsx)("h4",{children:k}),T?(0,v.jsxs)("div",{children:[(0,v.jsxs)("h1",{className:"font-oswald text-gray-700",children:["\u041e\u043d\u043e\u0432\u0438\u0442\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442 '",T.title,"' \u2014 (\u2116 ",T.sku,")."]}),(0,v.jsx)(d.m,{product:T,onSubmit:function(e){(0,l.p)(),C(e)},triggerRerender:q},"".concat(null===T||void 0===T?void 0:T.id))]}):(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{className:"font-oswald text-zinc-700",children:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e."}),(0,v.jsx)("p",{children:"\u041e\u043d\u043e\u0432\u0456\u0442\u044c \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443(F5) \u0430\u0431\u043e \u043f\u0435\u0440\u0435\u0439\u0434\u0456\u0442\u044c \u043d\u0430 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0443"}),(0,v.jsx)(o.rU,{to:"/product/add",className:"text-green-900 hover:drop-shadow hover:cursor-pointer underline font-oswald",children:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442"})]})]})]})}}}]);